| Root cause                                                                                                                                                                                                                                                                                                                            | Evidence                                                                                                                                                               | Recommendation                                                                                                                                                                                                                                                        |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **a. Every hourly refresh rebuilds the entire grid and re‑reads several CSV/Parquet files.**  The callback `update_sector_sentiment_container` executes on every tick, calls `fix_sector_display.ensure_consistent_sector_data()` and re‑imports pandas to reload *definitive\_sector\_scores.csv* as well as per‑day history files . | Heavy I/O + object creation → cards race to render; slow clients occasionally see empty graphs.                                                                        | *Cache once, then diff‑update.*  Store the latest scores in a `dcc.Store` (or server‑side `diskcache`) when they are first read; subsequent callback runs should grab the already‑parsed DataFrame instead of hitting the disk again.                                 |
| **b. Each sector mini‑chart is built synchronously inside the same callback.**                                                                                                                                                                                                                                                        | The for‑loop in `update_sector_sentiment_container` calls `sector_trend_chart.create_sector_trend_chart(sector)` for every sector before returning the children list . | Split into two callbacks: one that returns the grid shell (cards without figures) and another, `Output({'type':'sector-chart','index':MATCH}, 'figure')`, that lazily renders each Plotly figure.  Plotly renders asynchronously, eliminating the “white box” effect. |
| **c. Dynamic IDs are fine, but heights are not constrained.**  If the sector’s DataFrame comes back empty the figure has `height=400`, but the card container is 320 px wide with implicit height.                                                                                                                                    |  Charts overflow or collapse depending on CSS.                                                                                                                         | Add `style={'height':'260px','width':'100%'}` to every `dcc.Graph`, and set `figure.update_layout(height=240, margin_t=20)` inside `create_sector_trend_chart`.                                                                                                       |
| **d. Un‑handled exceptions inside `create_sector_trend_chart` bubble up silently.**                                                                                                                                                                                                                                                   | When any sector history file is missing the helper raises but the parent callback just returns nothing, so Dash shows a blank cell.                                    | Wrap that helper in `try/except`; on failure return a trivial “No data” figure so the grid layout stays intact.                                                                                                                                                       |
